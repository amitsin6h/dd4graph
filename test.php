<!DOCTYPE html><html lang="eng"><head><title>Digital Design</title><script src="https://code.jquery.com/jquery-1.9.1.js"></script><script src="https://code.highcharts.com/highcharts.js"></script><script src="https://code.highcharts.com/modules/exporting.js"></script><script type="text/javascript"><?php	include_once 'db_con.php';	/*$result = mysqli_query($db_con, "select patterns.name as 'filename', count(*) as 'totaldownloads' from downloads									left outer join pattern_files on downloads.pattern_file_id =pattern_files.id 									left outer join patterns on patterns.id = pattern_files.pattern_id									group by pattern_file_id ");	*/			$result = mysqli_query($db_con, "select pattern_file_id as id, patterns.name as Name,  ROUND(AVG(question_1)) as Rating,  group_concat(`question_2`) as Problems,  group_concat(`question_5`) as 'Comments' 		FROM 	reviews 		left outer join pattern_files on reviews.pattern_file_id =pattern_files.id 		left outer join patterns on patterns.id = pattern_files.pattern_id		where question_1 >0 and question_5 !=''		group by reviews.pattern_file_id"); 	$graph_data = "";	$patterns_name = "";		while($row = mysqli_fetch_array($result)){		$rating = $row['Rating'];		//$files_name = $row['filename'];		$file_id = $row['id'];				$problems= $row['Problems'];				$comments= $row['Comments'];								$graph_data .= "{y:$rating, patterns_name: '$file_id', comments:'$comments',problems:'$problems'},";		$patterns_name .= "'$file_id',";						}		?>$(function () {    $('#container').highcharts({        chart: {            renderTo: 'container',            type: 'bar'        },		 plotOptions: {            series: {                colorByPoint: true            }        },		 title: {            text: 'DD4 Graph'        },		subtitle: {            text: 'Subtitle'        },       		credits: {            enabled: false        },        series: [{			showInLegend: false,			name: 'Ratings',            data: [<?php echo $graph_data; ?>]        },],        tooltip: {            formatter: function() {return ' ' +				'<span style="color:#8E44AD;">Name: </span>' + '<strong>' + this.point.patterns_name + '</strong>' + '<br />' +				'<span style="color:#F1C40F;">Ratings: </span>' + '<strong>' + this.point.y + '</strong>' + '<br />' +                '<span style="color:#2CC990;">Comments: </span>' + '<strong>' + this.point.comments + '</strong>' + '<br />' +                '<span style="color:#A94442;">Problems: </span>' + '<strong>' + this.point.problems + '</strong>' + '<br />' ;                            }        }    });});</script>  </head>  <body><div id="container" style="width:100; height:900px;"></div></body></html>