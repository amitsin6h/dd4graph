<!DOCTYPE html><html lang="eng"><head><title>Digital Design</title><script src="https://code.jquery.com/jquery-1.9.1.js"></script><script src="https://code.highcharts.com/highcharts.js"></script><script src="https://code.highcharts.com/modules/exporting.js"></script><script type="text/javascript"><?php	include_once 'db_con.php';	/*$result = mysqli_query($db_con, "select patterns.name as 'filename', count(*) as 'totaldownloads' from downloads									left outer join pattern_files on downloads.pattern_file_id =pattern_files.id 									left outer join patterns on patterns.id = pattern_files.pattern_id									group by pattern_file_id ");	*/			$result = mysqli_query($db_con, "select pattern_file_id as id, patterns.name as Name,  ROUND(AVG(question_1)) as Rating,  group_concat(`question_2`) as Problems,  group_concat(`question_5`) as 'Comments' 		FROM 	reviews 		left outer join pattern_files on reviews.pattern_file_id =pattern_files.id 		left outer join patterns on patterns.id = pattern_files.pattern_id		where question_1 >0 and question_5 !=''		group by reviews.pattern_file_id"); 	$graph_data = "";			while($row = mysqli_fetch_array($result)){		$rating = $row['Rating'];		//$files_name = $row['filename'];		$file_id = $row['id'];				$problems= $row['Problems'];				$comments= $row['Comments'];								$graph_data .= "{'name':'$file_id', 'data':[$rating],},";										}		?>$(function () {    $('#container').highcharts({        chart: {        type: 'bar',        },        title: {            text: 'Digital Design Graph'        },        subtitle: {            text: 'Source: <a href="http://ppfdddev03.mmm.com/cutx/">DD4</a>'        },        xAxis: {			categories: [''],			title:{				text: 'Patterns'			}        },        yAxis: {            min: 0,            title: {                text: 'Rating',                align: 'high'            },            labels: {                overflow: 'justify'            }        },        tooltip: {					 pointFormat: '<p><strong>{series.name}</strong></p><br><p><span style="color:#1E9E6B;">Ratings:</span><?php echo $rating;?><p><br><p>Problems:<?php  echo $problems;?></p><br><p>Comment: <?php ?></p><br>',            valueSuffix: ' downloads'        },        plotOptions: {            bar: {                dataLabels: {                    enabled: true                }            },			series:{				pointWidth: 12,				pointPadding: 0,                groupPadding: .0			}        },        legend: {           enabled:false        },        credits: {            enabled: false        },        series: [		<?php echo $graph_data; ?>					]    });});</script>  </head>  <body>  <div id="container" style="width:100; height:900px;"></div></body></html>